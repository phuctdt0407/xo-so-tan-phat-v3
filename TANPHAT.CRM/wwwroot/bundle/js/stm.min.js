(function(){app.controller("System.createAgency",["$scope","$rootScope","$state","viewModel","notificationService","dayOfWeekVN","salepointService","activityService",function(n,t,i,r,u,f,e,o){function h(){s.IsCheck=!1}var s=angular.extend(this,r);s.isSaving=!1;h();s.checkData=function(){};s.listTypeAgency=[{id:1,type:"Đại lý"},{id:2,type:"Đại lý con"}];s.sendListData=[];s.save=function(){var t;s.IsCheck=!0;n.formCreate.$valid&&!s.isSaving&&(s.isSaving=!0,s.dataTypeAngency.id==1?(t={AgencyName:s.update.Name},o.insertOrUpdateAgency(t).then(function(n){n&&n.Id>0?setTimeout(function(){u.success(n.Message);i.reload();s.isSaving=!1},1e3):s.isSaving=!0})):s.dataTypeAngency.id==2&&(t={AgencyName:s.update.Name,Price:0},o.insertOrUpdateSubAgency(t).then(function(n){n&&n.Id>0?setTimeout(function(){u.success(n.Message);i.reload();s.isSaving=!1},1e3):s.isSaving=!0})))}}])})(),function(){app.controller("System.createSalePoint",["$scope","$rootScope","$state","viewModel","notificationService","dayOfWeekVN","salepointService",function(n,t,i,r,u,f,e){function s(){o.IsCheck=!1}var o=angular.extend(this,r);o.isSaving=!1;s();o.update={ActionBy:t.sessionInfo.UserId,ActionByName:t.sessionInfo.FullName};o.checkData=function(){};o.sendListData=[];o.save=function(){if(o.IsCheck=!0,n.formCreate.$valid&&!o.isSaving){o.isSaving=!0;var t={FullAddress:o.update.Address,SalePointName:o.update.Name,Note:o.update.Note};o.update.Data=JSON.stringify(t);e.updateSalePoint(o.update).then(function(n){n&&n.Id>0?setTimeout(function(){u.success(n.Message);i.reload();o.isSaving=!1},1e3):o.isSaving=!0})}}}])}(),function(){app.controller("System.manageAgency",["$scope","$rootScope","$state","viewModel","notificationService","dayOfWeekVN","salepointService","$uibModal",function(n,t,i,r,u,f,e,o){var s=angular.extend(this,r);s.isSaving=!1;s.tabId=1;s.classItem0=s.tabId&&s.tabId==1?"nav-link active":"nav-link";s.classItem1=s.tabId&&s.tabId==2?"nav-link active":"nav-link";s.changeTab=function(n){n===1&&(s.tabId=1);n===2&&(s.tabId=2)};s.openModal=function(n={},t){var u=baseAppPath+"/system/views/modal/",r=o.open({templateUrl:u+"updateAgency.html"+versionTemplate,controller:"System.updateAgency as $vm",backdrop:"static",size:"lg",resolve:{viewModel:["$q","$uibModal","userService","systemService",function(i){var r=i.defer(),u=angular.copy(n);return i.all([]).then(function(){var n={agencyInfo:u,type:t};r.resolve(n)}),r.promise}]}});r.opened.then(function(){$(document).ready(function(){$(".modal-footer").addClass("remove-modal-footer")})});r.result.then(function(){},function(n){typeof n=="object"&&i.reload()})}}])}(),function(){app.controller("System.manageSalePoint",["$scope","$rootScope","$state","viewModel","notificationService","dayOfWeekVN","salepointService","$uibModal",function(n,t,i,r,u,f,e,o){var s=angular.extend(this,r);s.isSaving=!1;s.openModal=function(n={}){var r=baseAppPath+"/system/views/modal/",t=o.open({templateUrl:r+"updateSalePoint.html"+versionTemplate,controller:"System.updateSalePoint as $vm",backdrop:"static",size:"lg",resolve:{viewModel:["$q","$uibModal","userService","systemService",function(t){var i=t.defer(),r=angular.copy(n);return t.all([]).then(function(){var n={salePointInfo:r};i.resolve(n)}),i.promise}]}});t.opened.then(function(){$(document).ready(function(){$(".modal-footer").addClass("remove-modal-footer")})});t.result.then(function(){},function(n){typeof n=="object"&&i.reload()})}}])}(),function(){app.controller("System.updateAgency",["$scope","$rootScope","$state","viewModel","$uibModalInstance","shiftStatus","userService","notificationService","salepointService","activityService",function(n,t,i,r,u,f,e,o,s,h){var c=angular.extend(this,r);c.checkActive=c.agencyInfo.IsActive;c.save=function(){var t;n.formCreate.$valid&&!c.isSaving&&(c.isSaving=!0,c.type==1?(t={AgencyName:c.agencyInfo.Name,AgencyId:c.agencyInfo.Id,Activity:c.checkActive,IsDeleted:!1},h.insertOrUpdateAgency(t).then(function(n){n&&n.Id>0?setTimeout(function(){o.success(n.Message);i.reload();c.isSaving=!1},1e3):c.isSaving=!0})):c.type==2&&(t={AgencyName:c.agencyInfo.AgencyName,AgencyId:c.agencyInfo.AgencyId,Activity:c.checkActive,IsDeleted:!1,Price:0},h.insertOrUpdateSubAgency(t).then(function(n){n&&n.Id>0?setTimeout(function(){o.success(n.Message);i.reload();c.isSaving=!1},1e3):c.isSaving=!0})))};c.close=function(){u.close()}}])}(),function(){app.controller("System.updateSalePoint",["$scope","$rootScope","$state","viewModel","$uibModalInstance","shiftStatus","userService","notificationService","salepointService",function(n,t,i,r,u,f,e,o,s){var h=angular.extend(this,r);h.update=angular.extend(h.salePointInfo,{ActionBy:t.sessionInfo.UserId,ActionByName:t.sessionInfo.FullName,SalePointId:h.salePointInfo.Id});h.save=function(){if(n.formCreate.$valid&&!h.isSaving){h.isSaving=!0;var t={FullAddress:h.update.FullAddress,IsActive:h.update.IsActive,SalePointName:h.update.Name,Note:h.update.Note};h.update.Data=JSON.stringify(t);s.updateSalePoint(h.update).then(function(n){n&&n.Id>0?setTimeout(function(){o.success(n.Message);i.reload();h.isSaving=!1},1e3):h.isSaving=!0})}};h.close=function(){u.close()}}])}(),function(){app.service("systemService",["baseService",function(n){var t=n.baseUrl+"/System";this.getSalePoint=function(i){var r=t+"/GetSalePoint";return n.getData(r,i)};this.createSalePoint=function(i){var r=t+"/CreateSalePoint";return n.postData(r,i)}}])}(),function(){var n=baseAppPath+"/system/views/";routes.system={url:"/system",abstract:!0,template:"<ui-view><\/ui-view>"};routes.system.manageSalePoint={url:"/manageSalePoint",params:{id:{value:"0",squash:!0}},templateUrl:n+"manageSalePoint.html"+versionTemplate,controller:"System.manageSalePoint as $vm",resolve:{viewModel:["$q","$stateParams","userService","systemService","ddlService","salepointService",function(n,t,i,r,u,f){var o=n.defer(),e=angular.copy(t);return e.day=e.day==""?moment().format("YYYY-MM-DD"):e.day,n.all([f.getListSalePoint({id:e.id})]).then(function(n){var t={params:e,listSalePoint:n[0]};o.resolve(t)}),o.promise}]},title:"Quản lý điểm bán"};routes.system.createSalePoint={url:"/createSalePoint",params:{},templateUrl:n+"createSalePoint.html"+versionTemplate,controller:"System.createSalePoint as $vm",resolve:{viewModel:["$q","$stateParams","userService","systemService","ddlService",function(n,t){var r=n.defer(),i=angular.copy(t);return i.day=i.day==""?moment().format("YYYY-MM-DD"):i.day,n.all([]).then(function(){var n={params:i};r.resolve(n)}),r.promise}]},title:"Tạo điểm bán"};routes.system.manageAgency={url:"/manageAgency",params:{id:{value:"0",squash:!0}},templateUrl:n+"manageAgency.html"+versionTemplate,controller:"System.manageAgency as $vm",resolve:{viewModel:["$q","$stateParams","userService","systemService","ddlService","salepointService","activityService",function(n,t,i,r,u,f,e){var s=n.defer(),o=angular.copy(t);return o.day=o.day==""?moment().format("YYYY-MM-DD"):o.day,n.all([u.agencyDDL(),e.getListSubAgency()]).then(function(n){var t={params:o,listAgencyDDL:n[0],listSubAgency:n[1]};s.resolve(t)}),s.promise}]},title:"Quản lý đại lý"};routes.system.createAgency={url:"/createAgency",params:{},templateUrl:n+"createAgency.html"+versionTemplate,controller:"System.createAgency as $vm",resolve:{viewModel:["$q","$stateParams","userService","systemService","ddlService",function(n,t){var r=n.defer(),i=angular.copy(t);return i.day=i.day==""?moment().format("YYYY-MM-DD"):i.day,n.all([]).then(function(){var n={params:i};r.resolve(n)}),r.promise}]},title:"Tạo đại lý"}}();