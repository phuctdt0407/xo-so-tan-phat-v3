var app=angular.module("KTHubApp",["ngRoute","ui.router","ui.bootstrap","ui.select","ngSanitize","angularjs-dropdown-multiselect","firebase","firebase.storage","ui.mask","dndLists"]).info({version:"1.0.0",name:"KTHubApp"});app.run(["$rootScope","$transitions","notificationService","$window","$sce","sessionService","authService","$state","$uibModalStack","$uibModal","userService",function(n,t,i,r,u,f,e,o,s,h){async function l(){try{await n.connection.start()}catch(t){setTimeout(l,5e3)}}var y,a,v,c;n.Hello="Angular running - ";n.inputText=!1;n.keyNumbers=["1","2","3","4","5","6","7","8","9"];n.App="Module: "+app.info().name;y="Version: "+app.info().version;a={apiKey:"AIzaSyDHVn4jU8QJtXd9tWvfAAiGtpy8zn-YvUU",authDomain:"theenestweb.firebaseapp.com",databaseURL:"https://theenestweb.firebaseio.com",projectId:"theenestweb",storageBucket:"theenestweb.appspot.com"};firebase.initializeApp(a);n.reg=/^\d+$/;n.inputNumber=function(n){(n.which<48||n.which>57)&&n.preventDefault()};n.pageTitleSuffix="TẤN PHÁT ";n.defaultPageSize=200;n.TodayDOW=moment().format("ddd");n.today=moment().format("DD/MM/YYYY");n.todayFormat=moment().format("YYYY-MM-DD");n.LS_ExpiredHour_ListTime=5;n.LS_ListTime_Name="LS_LIST_TIME";n.CKIE_ListTime_ExpiredName="CKIE_LIST_TIME_EX";n.DDMMYYYY_Pattern=/^(0[1-9]|[12][0-9]|3[01])\/(0[1-9]|1[0-2])\/\d{4}$/;n.phonePattern=/^(([+]?840)|0|([+]?84))(3|5|7|8|9){1}([0-9]{8})$/;n.passPattern=/^(?!.*\s)(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{6,}$/;n.usernamePattern=/^(?!.*\s)(?=.*[a-zA-Z]).{6,}$/;n.emailPattern=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;n.phoneFormat=function(n){var i=(""+n).replace(/\D/g,""),t=i.match(/^([+]?)(\d{1}|\d{2}|\d{3})(\d{2})(\d{3})(\d{4})$/);return t?"0"+t[3]+" "+t[4]+" "+t[5]:n};n.printElement=function(n){var t=document.createElement("iframe");t.style="height: 0px; width: 0px; position: absolute";document.body.appendChild(t);$(n).clone().appendTo(t.contentDocument.body);t.contentWindow.print();t.parentElement.removeChild(t)};n.nonAccentVietnamese=function(n){return n=n.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),n=n.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),n=n.replace(/ì|í|ị|ỉ|ĩ/g,"i"),n=n.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),n=n.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),n=n.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),n=n.replace(/đ/g,"d"),n=n.replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,""),n.replace(/\u02C6|\u0306|\u031B/g,"")};n.objToParam=function(n){var t="";for(var i in n)t!=""&&(t+="&"),t+=i+"="+n[i];return t};n.rmDupValue=function(n,t){return[...new Map(n.map(n=>[t(n),n])).values()]};n.checkExpired=function(n){return n>new Date/1e3-500};n.formatHHmmss=function(n){var u=parseInt(n,10),t=Math.floor(u/3600),i=Math.floor((u-t*3600)/60),r=u-t*3600-i*60;return t<10&&(t="0"+t),i<10&&(i="0"+i),r<10&&(r="0"+r),t+":"+i+":"+r};n.copyClipboard=function(n){var t=$("<input>");$("body").append(t);t.val($("#"+n).val().trim()).select();$("#"+n).val().trim()&&$("#"+n).val().trim()!==""&&(document.execCommand("copy"),i.success("Copy to clipbard",1e3));t.remove()};n.goToPage=function(n,t={},i=0){if(i==0)t=={}?o.go(n):o.go(n,t);else{var r=o.href(n,t);window.open(r,"_blank")}};n.toHTML=function(n){return u.trustAsHtml(n)};n.checkPermission=function(n){var t=f.getUserRole().filter(t=>t.root==n);return t&&t.length>0?!0:!1};n.ddmOptionForPickUnit={enableSearch:!0,scrollable:!0,clearSearchOnClose:!0,buttonClasses:"",displayProp:"UnitName",enableCheckAll:!1,checkBoxes:!0,showCheckAll:!1,showUncheckAll:!0,smartButtonMaxItems:3,idProperty:"UnitId"};n.ddmOptionForPickLesson={enableSearch:!0,scrollable:!0,clearSearchOnClose:!0,buttonClasses:"",displayProp:"Lesson",enableCheckAll:!1,checkBoxes:!0,showCheckAll:!1,showUncheckAll:!0,smartButtonMaxItems:3,idProperty:"LessonId"};n.checkHeader=function(){return getCookie("AUTH_")?!0:getLocalStorage("bearer")?!0:!1};v=function(){var n=baseAppPath+"/components/",t=h.open({templateUrl:n+"lostconnection.html"+versionTemplate,controller:["$rootScope","$state","$uibModalInstance",function(n,t,i){n.close=function(){i.close()}}],backdrop:"static",size:"md"})};n.GrpBy=function(n,t){return n.reduce(function(n,i){return(n[i[t]]=n[i[t]]||[]).push(i),n},{})};n.numToCurrency=function(n,t,i="0"){i==null&&(i="0");try{var r=i.replace(/[^0-9]/g,"");r=parseInt(r)?parseInt(r):0;r=r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");n[t]=r;console.log("temp",r)}catch(u){console.log(u)}};r.addEventListener("offline",function(){v()},!1);r.addEventListener("online",function(){s.dismissAll()},!1);t.onBefore({},function(){});t.onStart({},function(t){s.dismissAll();n.showLoading=!0;var i=t.$to(),r=i.name;n.checkHeader()?r==="root.home"&&e.getSession().then(function(n){n&&n.UserRoleId>0&&e.getFirstPageShow({userRoleId:n.UserRoleId}).then(function(n){if(n)if(n.ControllerName=="home")o.go("root.home");else{var t="root."+n.ControllerName.toLowerCase()+"."+n.ActionName.charAt(0).toLowerCase()+n.ActionName.slice(1);o.go(t)}})}):o.go("auth.login")});t.onSuccess({},function(t){var i=t.$to().name;i!="auth.login"&&i!="root.error"&&n.checkPermission(i)==!1&&o.go("root.error",{code:401});setTimeout(function(){n.showLoading=!1;n.$apply(n.showLoading)},500)});t.onError({},function(){});n.connection=(new signalR.HubConnectionBuilder).withUrl("/chathub").withAutomaticReconnect().build();n.connection.onclose(l);l();n.flagIsShow=!0;initSize=function(){$(window).width()<975};initSize();$(window).resize(function(){initSize()});$(document).keydown(function(n){return n.ctrlKey&&n.shiftKey&&n.keyCode=="C".charCodeAt(0)?!1:n.ctrlKey&&n.shiftKey&&n.keyCode=="J".charCodeAt(0)?!1:n.ctrlKey&&n.shiftKey&&n.keyCode=="I".charCodeAt(0)?!1:n.ctrlKey&&n.keyCode=="U".charCodeAt(0)?!1:n.keyCode==27?!1:void 0});n.eventInput=null;n.removeNum=function(){n.eventInput.value=n.eventInput.value.slice(0,-1);n.eventInput.dispatchEvent(new Event("change"))};n.styleMain="";n.showKeyBoard=function(t,i){n.eventInput=t.srcElement;n.inputText=i;var r=document.getElementById("test"),u=window.innerHeight,f=window.innerWidth,e=u*3/100;f>670&&r.classList.add("display")};n.closeKeyBoard=function(){n.eventInput=null;var t=document.getElementById("test");n.styleMain="";t.classList.remove("display")};n.changeNum=function(t){n.eventInput.value=n.inputText?n.eventInput.value+t:(n.eventInput.value+t)*1;n.eventInput.dispatchEvent(new Event("change"))};n.stopClick=function(n){n&&n.stopPropagation()};n.createBillNumber=function(n){for(var t=n.toString(),r=t.length,i=0;i<8-r;i++)t="0"+t;return t};n.printBill=function(t,i){n.modifyBill(t,i);n.printElement($("#print"))};c=function(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")};n.ToInt=function(n){return typeof n=="string"?parseInt(n.replace(/,/g,"")):n};n.ToCurrency=function(n){return typeof n=="string"?n.replace(/\B(?=(\d{3})+(?!\d))/g,","):n};n.modifyBill=function(n,t){console.log("model: ",n);$("#BillAddress").text(n.FullAddress);$("#SalePoint").text(n.SalePoint);$("#DatePrint").text(n.DatePrint);$("#ShiftName").text(n.ShiftName);$("#PrintTime").text(n.PrintTime);$("#BillNumber").text(n.BillNumber);$("#DateTime").text(n.DateTime);$("#ActionName").text(n.ActionName);$("#CustomerName").text(n.CustomerName);$("#Sum").text(c(n.Sum));$("#CustomerGive").text(c(n.CustomerGive));$("#TotalDebt").text(c(n.TotalDebt));$("#TotalQuatity").text(c(n.TotalQuatity));$("#PromotionCode").text(n.PromotionCode);$("#ChannelName").text(n.ChannelName);$(".rm").remove();n.ListInfo.forEach(function(n,t){$("#Detail_Bill").append(' <tr class="rm"> <td class= "description" id="LotteryName_'+t+'"> <\/td > <td class="quantity t-right" id="Quantity_'+t+'"><\/td> <td class="price t-right" id="Price_'+t+'"><\/td> <\/tr >');$("#LotteryName_"+t).text(n.LotteryName+n.FourLastNumber);$("#Quantity_"+t).text(c(n.Quantity));$("#Price_"+t).text(c(n.Price))});var i=$("#PromotionCode").text(n.PromotionCode);console.log("check promotion code bill",$("#PromotionCode").text(n.PromotionCode)[0].innerText);$("#PromotionCode").text(n.PromotionCode)[0].innerText==""?(console.log("check bill"),$("#promotion")[0].style.display="none"):(console.log("check billll"),$("#promotion")[0].style.display="block");t==2&&($("#History_Debt").append('<div class= "bill-total-quantity rm"> Nợ cũ: <span style="float: right;" id="OldDebt"><\/span><\/div ><div class="bill-total-quantity rm">Nợ mới: <span style="float: right;" id="NewDebt"><\/span><\/div>'),$("#OldDebt").text(c(n.OldDebt)),$("#NewDebt").text(c(n.NewDebt)))}}]);app.constant("daySchedule",[{Id:0,Day:"MON",Time:"12:00"},{Id:1,Day:"TUE",Time:"12:00"},{Id:2,Day:"WED",Time:"12:00"},{Id:3,Day:"THU",Time:"12:00"},{Id:4,Day:"FRI",Time:"12:00"},{Id:5,Day:"SAT",Time:"12:00"},{Id:6,Day:"SUN",Time:"12:00"}]);app.constant("dayOfWeek",[{Id:1,Day:"MON"},{Id:2,Day:"TUE"},{Id:3,Day:"WED"},{Id:4,Day:"THU"},{Id:5,Day:"FRI"},{Id:6,Day:"SAT"},{Id:0,Day:"SUN"}]);app.constant("extraPaymentType",[{Id:1,Sum:0,IsSum:!0,Name:"Tăng ca",TransactionTypeId:6,Css:"bg-overtime"},{Id:2,Sum:0,IsSum:!0,Name:"Thưởng",TransactionTypeId:7,Css:"bg-reward"},{Id:3,Sum:0,IsSum:!1,Name:"Phạt",TransactionTypeId:4,Css:"bg-prevent"},{Id:4,Sum:0,IsSum:!1,Name:"Ứng lương",TransactionTypeId:5,Css:""},{Id:5,Sum:0,IsSum:!1,Name:"Nợ nhân viên",TransactionTypeId:14,Css:"bg-blue"}]);app.constant("dayOfWeekVN",[{Id2:7,Id:1,Name:"Chủ nhật",SName:"CN"},{Id2:1,Id:2,Name:"Thứ 2",SName:"T2"},{Id2:2,Id:3,Name:"Thứ 3",SName:"T3"},{Id2:3,Id:4,Name:"Thứ 4",SName:"T4"},{Id2:4,Id:5,Name:"Thứ 5",SName:"T5"},{Id2:5,Id:6,Name:"Thứ 6",SName:"T6"},{Id2:6,Id:0,Name:"Thứ 7",SName:"T7"}]);app.constant("shiftStatus",[{Id:1,Name:"Ca gốc",SName:" "},{Id:2,Name:"Làm bù",SName:" (LB)"},{Id:3,Name:"Tăng ca",SName:" (TC)"},]);app.constant("shiftStatus2",[{Id:1,Name:"Ca 1",SName:" (C1)"},{Id:2,Name:"Ca 2",SName:" (C2)"},]);app.constant("optionPriority",[{Id:1,Name:"1",Value:1},{Id:2,Name:"2",Value:2},{Id:3,Name:"3",Value:3},{Id:4,Name:"4",Value:4},{Id:5,Name:"5",Value:5}]);app.constant("optionRequest",[{Id:201,Name:"Waiting for approval"},{Id:202,Name:"Approved"},{Id:300,Name:"Rejected"},{Id:500,Name:"Cancelled"}]);app.constant("optionSelect",[{Id:1,text:"Select 10",value:10},{Id:2,text:"Select 50",value:50},{Id:3,text:"Select 100",value:100},{Id:4,text:"Select 200",value:200}]);app.constant("listDateType",[{name:"None",value:""},{name:"Start date",value:"start_date"},{name:"End date",value:"end_date"}]);app.constant("transitionType",[{Id:0,Name:"Tất cả"},{Id:1,Name:"Chuyển vé"},{Id:2,Name:"Nhận vé"},{Id:3,Name:"Trả ế"}]);app.constant("studentActiveStatus",[{Id:1,Name:"Active"},{Id:2,Name:"Inacive"}]);app.constant("duration",[{Id:1,Name:"25 minutes"},{Id:2,Name:"50 minutes"}]);app.constant("typeOfItem",[{Id:1,Name:"công cụ"},{Id:2,Name:"máy móc"},]);app.constant("listClassStatus",[{Id:0,Name:"All status"},{Id:1,Name:"Not Started Yet"},{Id:2,Name:"On Going"},{Id:5,Name:"Done"}]);app.constant("listClassStatusFull",[{Id:1,Name:"Not Started Yet"},{Id:3,Name:"Cancel"},{Id:4,Name:"Deferred"},{Id:5,Name:"Done"}]);app.constant("sortIcon",["fa fa-sort","fa fa-sort-down","fa fa-sort-up"]);app.constant("listStudentType",[{Id:2,Value:"Regular"},{Id:1,Value:"Trial"}]);app.constant("phoneCode",[{Id:1,Value:"(+84) VN"},{Id:2,Value:"(+63) PHL"}]);app.constant("ActionDeferBy",[{Id:1,Value:"Teacher"},{Id:2,Value:"Student"}]);app.constant("PeriodTime",[{Id:1,Value:"< 1"},{Id:2,Value:"1 <= and <3"},{Id:3,Value:">=3"}]);app.constant("callType",[{Id:1,Value:"Outbound Call"},{Id:2,Value:"Inbound Call"}]);app.directive("title",["$rootScope","$timeout","$transitions","$anchorScroll",function(n,t,i,r){return{link:function(){var u=function(i){t(function(){n.title=i.title?n.pageTitleSuffix+" - "+i.title:n.pageTitleSuffix;n.headerTitle=i.title})};i.onSuccess({},function(t){u(t.$to());r("header-top");n.bindJavascriptEvents()})}}}]);app.directive("textTruncate",function(){return{restrict:"E",replace:!0,scope:{"class":"@?",title:"@"},template:'<span class="text-truncate {{class}}">{{title}}<\/span>',link:function(){}}});app.directive("textTruncateNew",function(){return{restrict:"E",replace:!0,scope:{"class":"@?",title:"@",text:"@"},template:'<span class="text-truncate-new {{class}}">{{title}}<hr class="hr-dashboard-tag">{{text}}<\/span>',link:function(){}}});app.directive("bread",["$state",function(n){return{restrict:"E",replace:!0,scope:{isExpanded:"=?",temp:"@",title:"@",parent1:"@?",parent2:"@?",param1:"@?",param2:"@?",urlParent1:"@?",urlParent2:"@?"},templateUrl:baseAppPath+"/components/breadcrumbs.html"+versionTemplate,link:function(t){t.temp=!1;t.toggleMenu=function(){$("#container").hasClass("sidebar-closed")?($("#container").removeClass("sidebar-closed"),t.temp=!1):($("#container").addClass("sidebar-closed"),t.temp=!0);$("#header").hasClass("sidebar-closed")?$("#header").removeClass("sidebar-closed"):$("#header").addClass("sidebar-closed");$("#subHeader").hasClass("sidebar-closed")?$("#subHeader").removeClass("sidebar-closed"):$("#subHeader").addClass("sidebar-closed")};t.ChangePage=function(t,i){i?n.go(t,JSON.parse(i)):n.go(t)};t.$watch("isExpanded",function(n){n?($("#container").addClass("sidebar-closed"),$("#header").addClass("sidebar-closed"),$("#subHeader").addClass("sidebar-closed"),t.temp=!0):($("#container").removeClass("sidebar-closed"),$("#header").removeClass("sidebar-closed"),$("#subHeader").removeClass("sidebar-closed"),t.temp=!1)})}}}]);app.directive("loading",function(){return{restrict:"E",replace:!0,scope:{"class":"@?",title:"@"},template:'<div class="loader dual-loader mx-auto"><\/div>',link:function(){}}});app.directive("pagination",["$rootScope","$state",function(n,t){return{restrict:"E",replace:!0,templateUrl:baseAppPath+"/components/pagination.html"+versionTemplate,scope:{params:"=",totalRow:"=",noReload:"=?"},link:function(i){i.IsShowCount=!0;i.stateName=t.current.name;i.CountShowPage=5;i.pageNumber=i.params.p?i.params.p:1;i.noReload=i.noReload?i.noReload:!1;i.rowPerPage=0;i.startNum=0;i.endNum=0;i.startIndex=1;i.endIndex=1;i.rowPerPage=i.params.ps?i.params.ps.toString():n.defaultPageSize.toString();i.totalPage=Math.ceil(i.totalRow/i.rowPerPage);i.listDisplayCount=[{value:5,name:"05"},{value:10,name:"10"},{value:20,name:"20"},{value:50,name:"50"},{value:100,name:"100"}];i.startIndex=(i.pageNumber-1)*i.rowPerPage+1;i.endIndex=Number(i.startIndex)+Number(i.rowPerPage)-1;i.endIndex=i.endIndex>=i.totalRow?i.totalRow:i.endIndex;var r=function(){i.totalPage=Math.ceil(i.totalRow/i.rowPerPage);i.pageNumber<=i.CountShowPage/2&&i.totalPage<=i.CountShowPage?(i.startNum=1,i.endNum=i.CountShowPage):i.pageNumber<=i.CountShowPage/2&&i.totalPage>i.CountShowPage?(i.startNum=1,i.endNum=i.CountShowPage-1):i.pageNumber>i.totalPage-i.CountShowPage/2&&i.totalPage>i.CountShowPage?(i.endNum=i.totalPage,i.startNum=i.endNum-i.CountShowPage/2-1):(i.startNum=i.pageNumber-i.CountShowPage/2+1,i.endNum=i.startNum+i.CountShowPage/2);i.startNum<1&&(i.startNum=1);i.endNum>i.totalPage&&(i.endNum=i.totalPage)};i.pageNumber<=i.CountShowPage/2&&i.totalPage<=i.CountShowPage?(i.startNum=1,i.endNum=i.CountShowPage):i.pageNumber<=i.CountShowPage/2&&i.totalPage>i.CountShowPage?(i.startNum=1,i.endNum=i.CountShowPage-1):i.pageNumber>i.totalPage-i.CountShowPage/2&&i.totalPage>i.CountShowPage?(i.endNum=i.totalPage,i.startNum=i.endNum-i.CountShowPage/2-1):(i.startNum=i.pageNumber-i.CountShowPage/2+1,i.endNum=i.startNum+i.CountShowPage/2);i.startNum<1&&(i.startNum=1);i.endNum>i.totalPage&&(i.endNum=i.totalPage);i.getNumber=function(n){return new Array(n)};i.GoToPage=function(n,u){u.preventDefault();n!==i.pageNumber&&(i.params.from&&(i.params.from=moment(i.params.from).format("YYYY-MM-DD")),i.params.to&&(i.params.to=moment(i.params.to).format("YYYY-MM-DD")),i.noReload==!1?t.go(".",angular.extend(i.params,{p:n})):(i.params=angular.extend(i.params,{p:n}),r()))};i.PreviousPage=function(){i.params.p>1&&(i.params.from&&(i.params.from=moment(i.params.from).format("YYYY-MM-DD")),i.params.to&&(i.params.to=moment(i.params.to).format("YYYY-MM-DD")),i.noReload==!1?t.go(".",angular.extend(i.params,{p:Number(i.pageNumber)-1})):(i.params=angular.extend(i.params,{p:Number(i.pageNumber)-1}),r()))};i.NextPage=function(n){n.preventDefault();i.params.p<i.totalPage&&(i.params.from&&(i.params.from=moment(i.params.from).format("YYYY-MM-DD")),i.params.to&&(i.params.to=moment(i.params.to).format("YYYY-MM-DD")),i.noReload==!1?t.go(".",angular.extend(i.params,{p:Number(i.pageNumber)+1})):(i.params=angular.extend(i.params,{p:Number(i.pageNumber)+1}),r()))};i.ChangePageSize=function(){i.params.from&&(i.params.from=moment(i.params.from).format("YYYY-MM-DD"));i.params.to&&(i.params.to=moment(i.params.to).format("YYYY-MM-DD"));i.noReload==!1?t.go(".",angular.extend(i.params,{p:1,ps:Number(i.rowPerPage)})):(i.params=angular.extend(i.params,{p:1,ps:Number(i.rowPerPage)}),r())};i.$watch("totalRow",function(n){n&&r()});i.$watch("params.p",function(n){n&&(i.pageNumber=n,i.startIndex=(i.pageNumber-1)*i.rowPerPage+1,i.endIndex=Number(i.startIndex)+Number(i.rowPerPage)-1,i.endIndex=i.endIndex>=i.totalRow?i.totalRow:i.endIndex,i.pageNumber<=i.CountShowPage/2&&i.totalPage<=i.CountShowPage?(i.startNum=1,i.endNum=i.CountShowPage):i.pageNumber<=i.CountShowPage/2&&i.totalPage>i.CountShowPage?(i.startNum=1,i.endNum=i.CountShowPage-1):i.pageNumber>i.totalPage-i.CountShowPage/2&&i.totalPage>i.CountShowPage?(i.endNum=i.totalPage,i.startNum=i.endNum-i.CountShowPage/2-1):(i.startNum=i.pageNumber-i.CountShowPage/2+1,i.endNum=i.startNum+i.CountShowPage/2),i.startNum<1&&(i.startNum=1),i.endNum>i.totalPage&&(i.endNum=i.totalPage))})}}}]);app.directive("daterangepicker",function(){return{restrict:"E",replace:!0,templateUrl:baseAppPath+"/components/daterangepicker.html"+versionTemplate,scope:{startDate:"=",endDate:"=",minDate:"=?"},link:function(n){n.startDate=n.startDate?n.startDate:moment().startOf("month");n.endDate=n.endDate?n.endDate:moment().endOf("month");var t=n.startDate,i=n.endDate,u=n.minDate?!0:!1,r=n.minDate?n.minDate:null;try{moment(r)>moment(t)&&(t=r)}catch(f){}cb=function(t,i){n.startDate=t;n.endDate=i;var r=$("#daterangepicker span").html(t.format("DD-MM-YYYY")+" - "+i.format("DD-MM-YYYY"));r[0].classList.add("text-black")};$("#daterangepicker").daterangepicker(u?{startDate:t,endDate:i,autoApply:!0,minDate:moment(r)}:{startDate:t,endDate:i,autoApply:!0,ranges:{Today:[moment(),moment()],Yesterday:[moment().subtract(1,"days"),moment().subtract(1,"days")],"Last 7 Days":[moment().subtract(6,"days"),moment()],"Last 30 Days":[moment().subtract(29,"days"),moment()],"This Month":[moment().startOf("month"),moment().endOf("month")],"Last Month":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]}},cb);$(".daterangepicker, #daterangepicker").on("mouseenter",function(){$("#daterangepicker")[0].classList.add("border-blue")}).on("mouseleave",function(){$("#daterangepicker")[0].classList.remove("border-blue")});cb(t,i)}}});app.directive("yearpicker",function(){return{restrict:"E",require:"ngModel",replace:!0,templateUrl:baseAppPath+"/components/monthyearpicker.html"+versionTemplate,scope:{dateFormat:"@",dateMin:"=",dateMax:"=",placeholder:"@",outputFormat:"@",onSelect:"&",model:"=ngModel",ngClass:"=ngClass",myClass:"@",opens:"@",pickTime:"@",timeStep:"@",ngDisabled:"=",classId:"@"},link:function(n,t){var u,i,r;n.dateFormat=angular.isUndefined(n.dateFormat)?"DD-MM-YYYY":n.dateFormat;n.outputFormat=angular.isUndefined(n.outputFormat)?"YYYY-MM-DD":n.outputFormat;n.formatedModel=n.model?moment(n.model).format(n.dateFormat):null;n.opens=n.opens?n.opens:"bottom left";u=$(t).find("input[type=text]:first");n.pickTime&&n.timeStep&&n.dateMin&&(i=parseInt(moment(n.dateMin).format("mm")),i>60-n.timeStep&&(n.dateMin=moment(n.dateMin).add(60-i,"minutes")));r=u.datepicker({format:" yyyy",viewMode:"years",minViewMode:"years",autoClose:!0,orientation:n.opens});r.on("changeDate",function(t){t.date=t.date=="Invalid Date"?moment():t.date;var i=t.date?moment(t.date):null;if(i!==null&&(n.$apply(function(){n.formatedModel=i.format("YYYY");n.model=i.format("YYYY")}),n.onSelect!==undefined&&i!==null))n.onSelect({date:i})});r.data("datepicker").setValue(moment(n.model))}}});app.directive("monthyearpicker",function(){return{restrict:"E",require:"ngModel",replace:!0,templateUrl:baseAppPath+"/components/monthyearpicker.html"+versionTemplate,scope:{dateFormat:"@",dateMin:"=",dateMax:"=",placeholder:"@",outputFormat:"@",onSelect:"&",model:"=ngModel",ngClass:"=ngClass",myClass:"@",opens:"@",pickTime:"@",timeStep:"@",ngDisabled:"=",classId:"@"},link:function(n,t){var u,i,r;n.dateFormat=angular.isUndefined(n.dateFormat)?"DD-MM-YYYY":n.dateFormat;n.outputFormat=angular.isUndefined(n.outputFormat)?"YYYY-MM-DD":n.outputFormat;n.formatedModel=n.model?moment(n.model).format(n.dateFormat):null;n.opens=n.opens?n.opens:"bottom left";u=$(t).find("input[type=text]:first");n.pickTime&&n.timeStep&&n.dateMin&&(i=parseInt(moment(n.dateMin).format("mm")),i>60-n.timeStep&&(n.dateMin=moment(n.dateMin).add(60-i,"minutes")));r=u.datepicker({format:"mm/yyyy",viewMode:"months",minViewMode:"months",autoClose:!0,orientation:n.opens});r.on("changeDate",function(t){t.date=t.date=="Invalid Date"?moment():t.date;var i=t.date?moment(t.date):null;if(i!==null&&(n.$apply(function(){n.formatedModel=i.format("MM/YYYY");n.model=i.format("YYYY-MM")}),n.onSelect!==undefined&&i!==null))n.onSelect({date:i})});r.data("datepicker").setValue(moment(n.model))}}});app.directive("datepicker",function(){return{restrict:"E",require:"ngModel",replace:!0,templateUrl:baseAppPath+"/components/datepicker.html"+versionTemplate,scope:{dateFormat:"@",dateMin:"=",dateMax:"=",placeholder:"@",daysOfWeekDisabled:"=",outputFormat:"@",onSelect:"&",model:"=ngModel",ngClass:"=ngClass",myClass:"@",iconClass:"@",wrapperClass:"@",ngDisabled:"=",myid:"@"},link:function(n,t,i,r){n.dateFormat=angular.isUndefined(n.dateFormat)?"DD-MM-YYYY":n.dateFormat;n.outputFormat=angular.isUndefined(n.outputFormat)?"YYYY-MM-DD":n.outputFormat;var u=$(t).find("input[type=text]:first"),f=function(){u.data("DateTimePicker")!==undefined&&(u.data("DateTimePicker").destroy(),u.unbind("changeDate"));var t={format:n.dateFormat=="dddd, DD-MM-YYYY"?"DD, dd-mm-yyyy":n.dateFormat=="ddd, DD-MM-YYYY"?"D, dd-mm-yyyy":"dd-mm-yyyy",startView:"month",minView:"month",autoclose:!0};n.ngDisabled?u.attr("disabled","disabled"):u.removeAttr("disabled");u.datetimepicker(t);n.dateMin!==undefined&&u.datetimepicker("setStartDate",n.dateMin);n.dateMax!==undefined&&u.datetimepicker("setEndDate",n.dateMax);u.on("changeDate",function(t){var i=t.date?moment(t.date):null,u="";if(i!==null){switch(n.outputFormat){case"timestamp":u=i.valueOf();break;default:u=i.format(n.outputFormat)}if(r.$setViewValue(u),n.onSelect!==undefined&&i!==null)n.onSelect({date:i,formatedDate:u,weekDay:i.weekday()})}})};n.$watch("daysOfWeekDisabled",function(t){n.daysOfWeekDisabled=t;f()});n.$watch("dateMin",function(n){n!==undefined&&u.data("DateTimePicker")&&u.data("DateTimePicker").minDate(moment(n))});n.$watch("dateMax",function(n){n!==undefined&&u.data("DateTimePicker")&&u.data("DateTimePicker").maxDate(moment(n))});n.$watch("model",function(t){t===null?$("#datepicker"+n.myid).val(null):$("#datepicker"+n.myid).val(moment(t,["DD-MM-YYYY","YYYY-MM-DD"]).format(n.dateFormat));u.data("DateTimePicker")&&(t===undefined?u.data("DateTimePicker").date(null):u.data("DateTimePicker").date(moment(t).format(n.dateFormat)))});f()}}});app.directive("datepickerNew",function(){return{restrict:"E",require:"ngModel",replace:!0,templateUrl:baseAppPath+"/components/datepickerNew.html"+versionTemplate,scope:{dateFormat:"@",dateMin:"=",dateMax:"=",placeholder:"@",outputFormat:"@",onSelect:"&",model:"=ngModel",ngClass:"=ngClass",myClass:"@",wrapperClass:"@",opens:"@",pickTime:"@",timeStep:"@",ngDisabled:"=",type:"@"},link:function(n,t){var i,u,r;if(n.dateFormat=angular.isUndefined(n.dateFormat)?"DD-MM-YYYY":n.dateFormat,n.outputFormat=angular.isUndefined(n.outputFormat)?"YYYY-MM-DD":n.outputFormat,n.formatedModel=n.model?moment(n.model).format(n.dateFormat):null,i=$(t).find("input[type=text]:first"),n.pickTime&&n.timeStep&&n.dateMin&&(u=parseInt(moment(n.dateMin).format("mm")),u>60-n.timeStep&&(n.dateMin=moment(n.dateMin).add(60-u,"minutes"))),n.type=n.type?n.type:0,r=null,r=n.type==0?{timePicker:angular.isUndefined(n.pickTime)?!1:n.pickTime.toLowerCase()=="true"?!0:!1,timePickerIncrement:angular.isUndefined(n.timeStep)?1:parseInt(n.timeStep),autoUpdateInput:!1,autoApply:!0,showDropdowns:!0,startDate:n.model?moment(n.model).format(n.dateFormat):moment(n.dateMax?n.dateMax:new Date).format(n.dateFormat),minDate:n.dateMin?n.dateMin:undefined,maxDate:n.dateMax?n.dateMax:undefined,opens:n.opens?n.opens:"left",locale:{format:n.dateFormat}}:{parentEl:getParentElement(),timePicker:!0,singleDatePicker:!0,timePicker24Hour:!0,timePickerIncrement:10,timePickerSeconds:!1,autoUpdateInput:!1,startDate:n.model?moment(n.model).format(n.dateFormat):moment().format(n.dateFormat),locale:{format:n.dateFormat}},n.type==0)i.daterangepicker(r);else i.daterangepicker(r).on("show.daterangepicker",function(n,t){t.container.find(".calendar-table").hide()});i.on("apply.daterangepicker",function(t,i){var u=i.startDate,r=u?u:null;r!==null&&(n.$apply(function(){n.formatedModel=r.format(n.dateFormat);n.model=r.format(n.outputFormat)}),n.onSelect!==undefined&&r!==null&&n.$apply(function(){n.onSelect({date:r})}))});n.$watch("dateMin",function(n){n!==undefined&&(i.data("daterangepicker").minDate=moment(n))});n.$watch("dateMax",function(n){n!==undefined&&(i.data("daterangepicker").maxDate=moment(n))})}}});app.directive("telephone",function(){return{restrict:"A",scope:{data:"=",clickCallback:"&",selectedItem:"=",ngMode:"="},templateUrl:baseAppPath+"/components/phoneInput.html"+versionTemplate,link:function(n,t,i){n.optValue=i.optValue;n.optDescription=i.optDescription;n.optFilter=i.optFilter}}});app.directive("contenteditable",function(){return{restrict:"A",require:"ngModel",link:function(n,t,i,r){function u(){var i=String.fromCharCode(10),n=t.html().replace(/<br>/ig,i).replace(/\r/ig,"").replaceAll("&nbsp;"," ").replaceAll("&amp;","");r.$setViewValue(n);t.text(n)}r.$render=function(){t.html(r.$viewValue||"")};t.bind("blur",function(){n.$apply(u)});t.bind("paste",function(n){n.preventDefault();document.execCommand("inserttext",!1,n.clipboardData.getData("text/plain"))})}}});app.filter("workingFilter",function(){return function(n){return n===""||n===null?n:n===!0?'<span class="badge badge-sm badge-success">Working<\/span>':'<span class="badge badge-sm badge-danger">Stopped<\/span>'}});app.filter("typeCheckStatus",function(){return function(n){if(n===""||n===null)return n;switch(n){case 1:return'<i class="fa fa-exclamation-triangle" aria-hidden="true"><\/i>';case 2:return'<i class="fa fa-circle-o-notch fa-spin" aria-hidden="true"><\/i>';case 3:return'<i class="fa fa-times btn-danger" aria-hidden="true"><\/i>';case 4:return'<i class="fa fa-check btn-success" aria-hidden="true"><\/i>';default:return""}}});app.filter("activeStatus",function(){return function(n){return n===""||n===null?n:n==1?'<span class="badge badge-sm badge-success activeCustom">Chuyển vé<\/span>':'<span class="badge badge-sm badge-warning activeCustom">Nhận vé<\/span>'}});app.filter("statusRequest",function(){return function(n){if(n===""||n===null)return n;switch(n){case 100:return'<span class="badge badge-sm badge-info">New<\/span>';case 101:return'<span class="badge badge-sm badge-primary">Call back later<\/span>';case 201:return'<span class="badge badge-sm badge-warning">Waiting-For-Approval<\/span>';case 202:return'<span class="badge badge-sm badge-success">Approved<\/span>';case 300:return'<span class="badge badge-sm badge-danger">Rejected<\/span>';case 500:return'<span class="badge badge-sm badge-danger">Call fail<\/span>';default:return""}}});app.filter("optionRequest",function(){return function(n){if(n===""||n===null)return n;switch(n){case 201:return'<span class="badge badge-sm badge-warning label-info">Waiting for approval<\/span>';case 202:return'<span class="badge badge-sm badge-success label-info">Approved<\/span>';case 300:return'<span class="badge badge-sm badge-danger label-info">Rejected<\/span>';case 500:return'<span class="badge badge-sm badge-danger label-info">Cancelled<\/span>';default:return""}}});app.filter("problemFilter",function(){return function(n){if(n===""||n===null)return n;switch(n){case 1:return'<span class="badge badge-sm badge-danger">Not-Solved<\/span>';case 2:return'<span class="badge badge-sm badge-success">Solved<\/span>';case 3:return'<span class="badge badge-sm badge-warning">Solved<\/span>';default:return""}}});app.filter("formatNumberFloatAvgReport",["$filter",function(){return function(n){var t,i,r;if(n===""||!n||isNaN(n))return"0";if(t=n.toString().split("."),t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t[1])if(i=parseInt(t[1].substr(0,1)),t[1].length>1){if(r=parseInt(t[1].substr(1,1)),r>=0&&r<5)t[1]=i;else if(i<9)t[1]=i+1;else return parseInt(t[0])>=0?parseInt(t[0])+1:parseInt(t[0])-1;if(t[1]===0)return t[0]}else t[1]=i;return t.join(".")}}]);app.filter("formatPercentFloat",["$filter",function(n){return function(t){if(t===""||!t||isNaN(t)||t==0)return"0%";var i=t.toString().split(".");return i.length>1&&i[1].length>2&&(t=n("number")(parseFloat(t),2),i=t.toString().split(".")),i[0]=i[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),i.join(".")+"%"}}]);app.filter("formatNumberFloat",["$filter",function(){return function(n){if(n===""||!n||isNaN(n))return"0";var t=n.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}}]);app.filter("formatPercent",["$filter",function(n){return function(t){var i,r;return t===""||!t||isNaN(t)?"0%":parseInt(t)<=0?(i=n("number")(parseFloat(t),0),i.replace(/\B(?=(\d{3})+(?!\d))/g,".")+"%"):(r=n("number")(parseFloat(t),0),r.replace(/\B(?=(\d{3})+(?!\d))/g,".")+"%")}}]);app.filter("formatNumber",["$filter",function(){return function(n){return n===""||!n||isNaN(n)?"0":parseInt(n).toString().replace(".",",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}}]);app.filter("classType",function(){return function(n){return n===""||n===null?n:n===1?'<span class="badge badge-md badge-warning label-info">Trial<\/span>':n===2?'<span class="badge badge-md badge-info label-info">Regular<\/span>':void 0}});app.filter("classSessionType",function(){return function(n){return n===""||n===null?n:n===1?'<span class="badge badge-md trial label-info">Trial<\/span>':n===2?'<span class="badge badge-md regular label-info">Regular<\/span>':n===3?'<span class="badge badge-md bonus label-info">Bonus<\/span>':'<span class="badge badge-md regular label-info">Make-up<\/span>'}});app.filter("classStatus",function(){return function(n,t){return n===""||n===null?n:n===1?'<span class="badge badge-md badge-primary label-info">Not Started Yet<\/span>':n===2?'<span class="badge badge-md badge-purple label-info">On Going<\/span>':n===3?t?'<span class="badge badge-md badge-warning label-info">Absent<\/span>':'<span class="badge badge-md badge-danger label-info">Cancelled<\/span>':n===4?t?'<span class="badge badge-md badge-warning label-info">Absent<\/span>':'<span class="badge badge-md badge-warning label-info">Deferred<\/span>':n===5?'<span class="badge badge-md badge-success label-info">Done<\/span>':n===6?'<span class="badge badge-md badge-info label-info">Waiting For Make-up<\/span>':void 0}});app.filter("genderFilter",function(){return function(n){return n===0?'<span class="badge badge-md badge-pink">Female<\/span>':n===1?'<span class="badge badge-md badge-info">Male<\/span>':'<span class="badge badge-md badge-gray">Unknown<\/span>'}});app.filter("yesNoFilter",function(){return function(n){return n?'<span class="badge badge-md yes-bg-color label-info">Yes<\/span>':'<span class="badge badge-md no-bg-color label-info">No<\/span>'}});app.filter("formatCurrency",function(){return function(n){return n&&n!==""&&n!==null?n.toString().replace(/(\d)(?=(\d\d\d)+(?!\d))/g,"$1,"):""}});app.filter("formatDate",function(){return function(n,t){var i=new RegExp(/\d+/),r;return t=t?t:"DD/MM/YYYY",n&&n!==""&&n!==null&&n&&n!=="01/01/0001"?moment.isMoment(n)?n.isValid()?n.format(t):"":moment(n).isValid()?moment(n).format(t):i.test(n)?(r=new Date(n.match(i)[0]*1),moment(r).format(t)):new Date(parseInt(n.substr(6))):""}});app.filter("formatDateTime",function(){return function(n,t){var i=new RegExp(/\d+/),r;return t=t?t:"HH:mm DD/MM/YYYY",n&&n!==""&&n!==null&&n&&n!=="00:00 01/01/0001"?moment.isMoment(n)?n.isValid()?n.format(t):"":moment(n).isValid()?moment(n).format(t):i.test(n)?(r=new Date(n.match(i)[0]*1),moment(r).format(t)):new Date(parseInt(n.substr(6))):""}});app.filter("formatDateTimeByHours",function(){return function(n,t){var i=new RegExp(/\d+/),r;return t=t?t:"HH:mm",n&&n!==""&&n!==null&&n&&n!=="00:00"?moment.isMoment(n)?n.isValid()?n.format(t):"":moment(n).isValid()?moment(n).format(t):i.test(n)?(r=new Date(n.match(i)[0]*1),moment(r).format(t)):new Date(parseInt(n.substr(6))):""}});app.filter("tel",function(){return function(n){var i=/^(?:\+?1[-. ]?)?(?:\(?([0-9]{3})\)?[-. ]?)?([0-9]{3})[-. ]?([0-9]{4})$/,t,r;return i.test(n)?(t=n.match(i),r="",r+(t[1]+"-"+t[2]+"-"+t[3])):n}});app.filter("callType",function(){return function(n){return n===""||n===null?n:n===0?'<span class="badge badge-md badge-success label-info">Outbound<\/span>':n===1?'<span class="badge badge-md badge-danger label-info">Inbound<\/span>':'<span class="badge badge-md badge-gray label-info">Unknow<\/span>'}});app.filter("shift",function(){return function(n){return n===""||n===null?n:n===1?'<span class="badge badge-md morning-shift label-info">Ca sáng<\/span>':'<span class="badge badge-md evening-shift label-info">Ca chiều<\/span>'}});app.filter("userStatus",function(){return function(n){return n==!1?'<span class="badge badge-md badge-danger label-info">Ngưng hoạt động<\/span>':'<span class="badge badge-md badge-success label-info">Hoạt động<\/span>'}});app.filter("confirmStatus",function(){return function(n){return n==1?'<span class="badge badge-md badge-warning label-info">Chờ xác nhận<\/span>':n==2?'<span class="badge badge-md badge-success label-info">Đã xác nhận<\/span>':n==3?'<span class="badge badge-md badge-danger label-info">Huỷ yêu cầu<\/span>':void 0}});app.filter("changeColor",function(){return function(n){return n<0?'<span class="badge badge-md badge-success label-info">'+n+"<\/span>":n>0?'<span class="badge badge-md badge-warning label-info">'+n+"<\/span>":n==null?"":void 0}});app.filter("confirmPayment",function(){return function(n){return n==!1?'<span class="badge badge-md badge-warning label-info">Chờ xác nhận<\/span>':n==!0?'<span class="badge badge-md badge-success label-info">Đã xác nhận<\/span>':void 0}});app.filter("detail",function(){return function(n){return n==!1?'<span class="badge badge-md badge-danger label-info">Đóng<\/span>':'<span class="badge badge-md badge-success label-info">Xem<\/span>'}});app.filter("transactionType",function(){return function(n){return n==0?"":n==1?"Chuyển vé":n==2?"Nhận vé":"Trả ế"}});window.setLocalStorage=function(n,t){localStorage.setItem(n,t)};window.getLocalStorage=function(n){return localStorage.getItem(n)};window.removeLocalStorage=function(n){localStorage.removeItem(n)};window.clearLocalStorage=function(){localStorage.clear(name)};window.getCookie=function(n){var t=document.cookie.match("(^|;) ?"+n+"=([^;]*)(;|$)");return t?t[2]:null};window.setCookieDay=function(n,t,i){var r=new Date;r.setTime(r.getTime()+864e5*i);document.cookie=n+"="+t+";path=/;expires="+r.toGMTString()};window.setCookieHour=function(n,t,i){var r=new Date;r.setTime(r.getTime()+36e5*i);document.cookie=n+"="+t+";path=/;expires="+r.toGMTString()};window.setCookieSecond=function(n,t,i){var r=new Date;r.setTime(r.getTime()+1e3*i);document.cookie=n+"="+t+";path=/;expires="+r.toGMTString()};window.deleteCookie=function(n){setCookieDay(n,"",-1)};window.isMobile=function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)};String.prototype.toUnaccent||(String.prototype.toUnaccent=function(){var n=this;return n&&(n=n.toLowerCase(),n=n.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),n=n.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),n=n.replace(/ì|í|ị|ỉ|ĩ/g,"i"),n=n.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),n=n.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),n=n.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),n=n.replace(/đ/g,"d")),n}),function(){app.config(["$urlMatcherFactoryProvider","$stateProvider","$urlRouterProvider","$locationProvider",function(n,t,i,r){i.otherwise("/error/404");r.html5Mode({enabled:!0,requireBase:!1});n.caseInsensitive(!0);n.strictMode(!1);t.state("root",routes.root);t.state("root.home",routes.home);t.state("root.error",routes.error);t.state("auth",routes.auth).state("auth.login",routes.auth.login);t.state("root.user",routes.user).state("root.user.manage",routes.user.manage).state("root.user.schedule",routes.user.schedule).state("root.user.storeShiftManage",routes.user.storeShiftManage).state("root.user.workSchedule",routes.user.workSchedule).state("root.user.rolePermission",routes.user.rolePermission).state("root.user.checkSchedule",routes.user.checkSchedule).state("root.user.checkScheduleIntern",routes.user.checkScheduleIntern).state("root.user.staffSchedule",routes.user.staffSchedule).state("root.user.targetTable",routes.user.targetTable).state("root.user.kpi",routes.user.kpi).state("root.user.holidaySchedule",routes.user.holidaySchedule).state("root.user.extraPayment",routes.user.extraPayment).state("root.user.manageLeaderOff",routes.user.manageLeaderOff).state("root.user.createUser",routes.user.createUser);t.state("root.activity",routes.activity).state("root.activity.manage",routes.activity.manage).state("root.activity.manageScratchcard",routes.activity.manageScratchcard).state("root.activity.create",routes.activity.create).state("root.activity.createScratchcard",routes.activity.createScratchcard).state("root.activity.salesActivity",routes.activity.salesActivity).state("root.activity.inventoryManage",routes.activity.inventoryManage).state("root.activity.checkTransfer",routes.activity.checkTransfer).state("root.activity.selectSalepoint",routes.activity.selectSalepoint).state("root.activity.moveTicket",routes.activity.moveTicket).state("root.activity.manageConfirm",routes.activity.manageConfirm).state("root.activity.agencyPrice",routes.activity.agencyPrice).state("root.activity.returnAgency",routes.activity.returnAgency).state("root.activity.managePayment",routes.activity.managePayment).state("root.activity.purchaseHistory",routes.activity.purchaseHistory).state("root.activity.ownDebtManage",routes.activity.ownDebtManage).state("root.activity.requestOwnDebt",routes.activity.requestOwnDebt).state("root.activity.moneyVietlott",routes.activity.moneyVietlott).state("root.activity.groupLotteryManage",routes.activity.groupLotteryManage).state("root.activity.groupMoneyManage",routes.activity.groupMoneyManage).state("root.activity.historyBill",routes.activity.historyBill).state("root.activity.otherCosts",routes.activity.otherCosts).state("root.activity.otherCostsHistory",routes.activity.otherCostsHistory).state("root.activity.scratchCardLog",routes.activity.scratchCardLog).state("root.activity.scratchCardFullLog",routes.activity.scratchCardFullLog).state("root.activity.activityLog",routes.activity.activityLog).state("root.activity.distributeForSubAgency",routes.activity.distributeForSubAgency).state("root.activity.sendAndReceive",routes.activity.sendAndReceive).state("root.activity.subAgencyPrice",routes.activity.subAgencyPrice).state("root.activity.manageScratchcardForSubAgency",routes.activity.manageScratchcardForSubAgency).state("root.activity.manageStaffDebt",routes.activity.manageStaffDebt).state("root.activity.staticFee",routes.activity.staticFee);t.state("root.report",routes.report).state("root.report.hardWorking",routes.report.hardWorking).state("root.report.dividedLottery",routes.report.dividedLottery).state("root.report.soldLottery",routes.report.soldLottery).state("root.report.detailSalePoint",routes.report.detailSalePoint).state("root.report.receiveLottery",routes.report.receiveLottery).state("root.report.returnLottery",routes.report.returnLottery).state("root.report.remainingLottery",routes.report.remainingLottery).state("root.report.reportSalePoint",routes.report.reportSalePoint).state("root.report.lotteryTransport",routes.report.lotteryTransport).state("root.report.detailDividedLottery",routes.report.detailDividedLottery).state("root.report.historyActivity",routes.report.historyActivity).state("root.report.manageItem",routes.report.manageItem).state("root.report.lotterySaleInMonth",routes.report.lotterySaleInMonth).state("root.report.confirmTransferItem",routes.report.confirmTransferItem).state("root.report.salary",routes.report.salary).state("root.report.sale",routes.report.sale).state("root.report.feeOutside",routes.report.feeOutside).state("root.report.reportSaleLotoAndVietllot",routes.report.reportSaleLotoAndVietllot).state("root.report.compare",routes.report.compare).state("root.report.salaryFund",routes.report.salaryFund).state("root.report.unionFund",routes.report.unionFund).state("root.report.winningReport",routes.report.winningReport).state("root.report.reportReturnMoney",routes.report.reportReturnMoney).state("root.report.agencyReport",routes.report.agencyReport).state("root.report.keepLottery",routes.report.keepLottery).state("root.report.lotteryOfManager",routes.report.lotteryOfManager);t.state("root.system",routes.system).state("root.system.manageSalePoint",routes.system.manageSalePoint).state("root.system.createSalePoint",routes.system.createSalePoint).state("root.system.manageAgency",routes.system.manageAgency).state("root.system.createAgency",routes.system.createAgency);t.state("root.salepoint",routes.salepoint).state("root.salepoint.debtManage",routes.salepoint.debtManage).state("root.salepoint.salePointPercent",routes.salepoint.salePointPercent).state("root.salepoint.guestManage",routes.salepoint.guestManage).state("root.salepoint.commissionWinning",routes.salepoint.commissionWinning)}])}(),function(){app.service("baseService",["$http",function(n){this.baseUrl="/api";this.getData=function(t,i){return this.getHeaders()!=null?n.get(t,{params:i,headers:this.getHeaders()}).then(function(n){return n.data.Data?n.data.Data:n.data}):n.get(t,{params:i}).then(function(n){return n.data.Data?n.data.Data:n.data})};this.postData=function(t,i){return this.getHeaders()!=null?n.post(t,i,{headers:this.getHeaders()}).then(function(n){return n.data.Data?n.data.Data:n.data}):n.post(t,i).then(function(n){return n.data.Data?n.data.Data:n.data})};this.uploadFile=function(t,i,r){var u=new FormData;return u.append("Excel",i),u.append("Name",i.name),r&&u.append("params",r),n.post(t,u,{headers:{"Content-Type":undefined},transformRequest:angular.identity}).then(function(n){return n.data}).catch(function(n){return n})};this.getHeaders=function(n){return getCookie("AUTH_")?{Authorization:"Bearer "+getCookie("AUTH_"),"Content-Type":n?undefined:"application/json; charset=utf-8"}:getLocalStorage("bearer")?{Authorization:"Bearer "+getLocalStorage("bearer"),"Content-Type":n?undefined:"application/json; charset=utf-8"}:null}}])}(),function(){app.service("sessionService",["$rootScope",function(n){var t,i=[];this.setUserRole=function(t){i=t;n.$broadcast("event:role-change",{some:"data"})};this.setSession=function(n){t=n};this.getSession=function(){return t};this.getUserRole=function(){return i}}])}(),function(){app.service("notificationService",["$rootScope",function(){var n=2500;this.error=function(t){let i=swal.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:n,padding:"2em",background:"#ffe3e3"});i({type:"error",title:t,padding:"2em"})};this.success=function(t,i=n){let r=swal.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:i,padding:"2em",background:"#b3ffc8"});r({type:"success",title:t,padding:"2em"})};this.warning=function(t){let i=swal.mixin({toast:!0,position:"center",showConfirmButton:!1,timer:n,padding:"2em",background:"#ffe1b5"});i({type:"warning",title:t,padding:"2em"})}}])}();