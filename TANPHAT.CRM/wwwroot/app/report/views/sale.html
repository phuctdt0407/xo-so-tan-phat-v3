<div class="col-xl-12 col-lg-12 col-sm-12  layout-spacing">
    <div class="container-fluid wh-bg mt-10">
        <div class="row" style="padding-left:15px">
            <div class="wh-bg d-flex justify-content-start" style="gap: 16px">
                <div class="mt20 w160px pt-10">
                    <label>Tháng</label>
                    <monthyearpicker my-class="input-sm datepicker-new" date-format="MM/YYYY" placeholder="All month"
                                     ng-model="$vm.month" on-select="$vm.loadData()" ng-change="$vm.loadData()" output-format="YYYY-MM"></monthyearpicker>
                </div>
                <div class="mt20 w160px pt-10" style="height:115px">
                    <label>Điểm bán</label>
                    <ui-select close-on-select="true" ng-model="$vm.selectedSalePoint" theme="select2"
                               search-enabled="true">
                        <ui-select-match placeholder="Chọn điểm bán" allow-clear="true">
                            {{$select.selected.Name}}
                        </ui-select-match>
                        <ui-select-choices position="down" repeat="ele.Id.toString() as ele in listSalePoint">
                            {{ele.Name}}
                        </ui-select-choices>
                    </ui-select>
                </div>
                <div class="mt20 w160px pt-10">
                    <div style="height: 44px; margin-top: calc(115px - 24px - 44px - 0.5em)" class="btn btn-primary resizeSchedule" ng-click="$vm.onClickDoanhThu()"> Doanh thu </div>
                </div>
            </div>
        </div>

        <!--New layout-->
        <div class="table-responsive resize-tb" style="max-height:calc(100vh - 64px - 123px - 59px - 16px)">
            <table class="table table-wrapper-scroll-y my-custom-scrollbar" style="width: unset">
                <thead class="theader text-center bg-success fix-scroll ">
                    <tr class="flex flex-wrap sticky-border-1">
                        <th class="text-center bg-success sticky theader" colspan="2">
                            {{$vm.selectedSalePointName}}
                        </th>
                        <th class="text-center bg-success sticky theader" colspan="3">
                            Lợi nhuận {{$vm.loiNhuanThang}}
                        </th>
                    </tr>
                    <tr class="flex flex-wrap sticky-border-1">
                        <th class="text-center  sticky theader">
                            STT
                        </th>
                        <th class="text-center sticky theader">
                            Tên
                        </th>
                        <th class="text-center sticky theader">
                            Chỉ tiêu
                        </th>
                        <th class="text-center sticky theader">
                            Số lượng vé
                        </th>
                        <th class="text-center sticky theader">
                            Thành tiền
                        </th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="chi in chiTieu track by $index">
                        <td ng-if="chi.mainChiTieuId != 5">{{$index + 1}}</td>
                        <td style="background: #D36B00;font-weight:bold" ng-if="chi.mainChiTieuId == 5">TC</td>
                        <td class="text-left" rowspan="17" ng-if="$index == 0 && chi.mainChiTieuId == 1">
                            Truyền thống
                        </td>
                        <td class="text-left" rowspan="6" ng-if="$index == 17 && chi.mainChiTieuId == 2">
                            Vietlott
                        </td>
                        <td class="text-left" rowspan="3" ng-if="$index == 23  && chi.mainChiTieuId == 3">
                            Lotto
                        </td>
                        <td class="text-left" rowspan="14" ng-if="$index == 26 && chi.mainChiTieuId == 4">
                        </td>
                        <td class="text-left" rowspan="14" ng-if="$index == 26 && chi.mainChiTieuId == 5">
                        </td>

                        <td ng-if="chi.mainChiTieuId != 5" class="text-left" ng-style="{'background' : (chi.isTotal != undefined && chi.isTotal && chi.mainChiTieuId != 5) ? '#FFD95A' : '','font-weight' : (chi.isTotal != undefined && chi.isTotal) ? 'bold' : ''}">
                            {{chi.name}}
                        </td>
                        <td ng-if="chi.mainChiTieuId != 5" class="text-right" ng-style="{'background' : (chi.isTotal != undefined && chi.isTotal && chi.mainChiTieuId != 5) ? '#FFD95A' : ''}">
                            {{chi.soLuong | formatCurrency}}
                        </td>
                        <td ng-if="chi.mainChiTieuId != 5" class="text-right" ng-style="{'background' : (chi.isTotal != undefined && chi.isTotal && chi.mainChiTieuId != 5) ? '#FFD95A' : ''}">
                            {{chi.thanhTien | formatCurrency}}
                        </td>

                        <td ng-if="chi.mainChiTieuId == 5" class="text-left" style="background: #D36B00">
                        </td>
                        <td ng-if="chi.mainChiTieuId == 5" class="text-right" style="background: #D36B00">
                        </td>
                        <td ng-if="chi.mainChiTieuId == 5" class="text-right" style="background: #D36B00">
                        </td>
                        <td ng-if="chi.mainChiTieuId == 5" class="text-right" style="background: #D36B00">
                            {{chi.thanhTien | formatCurrency}}
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>